#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo '
ğŸ—ï¸ğŸ‘· Formatting code and checking formats
'

# Check Prettier standards
yarn format && yarn check-format ||
(
    echo '
    âŒ Prettier Check Failed. Add changes and try commit again.
    ';
    false;
)

echo '
âœ… Formatting pass.
'

echo '
ğŸ—ï¸ğŸ‘· Checking ESLint Standards
'

# Check ESLint Standards
yarn check-lint || (
    
    echo '
        ğŸ—ï¸ğŸ‘· ESLint Check Failed. Trying to fix automagically.
        '
    yarn check-lint --fix && yarn check-lint

) ||
(
        echo '
        âŒ ESLint Check Failed.
        '
        false
)

echo '
âœ… ESlint pass.
'

echo '
ğŸ—ï¸ğŸ‘· Checking tsconfig standards
'

yarn check-types ||
(
    echo '
    Make the changes required above.
    '
    false;
)

echo '
âœ… tsconfig standards check pass.
'

# If everything passes... Now we can commit
echo 'ğŸ—ï¸ğŸ‘· Generating build.'

yarn build ||
(
    echo '
    âŒ Next build failed: View the errors above to see why. 
    '
    false;
)

# If everything passes... Now we can commit
echo '
âœ… Code commited with success!
'